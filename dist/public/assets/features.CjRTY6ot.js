import{r as l,u as je,a as Ne,b as ve,j as e,R as Oe,M as ye,C as De,X as $e,H as Re,c as ze,d as be,e as Ue,S as Le,E as Ve,T as pe,I as qe,f as Ke,V as Be,g as Fe,P as Qe,h as Ye,i as He,k as Xe,L as Je}from"./react-vendor.BNJGvZZE.js";import{B as v,a as We,L as H,T as Ge,I as he,S as Ze,b as et,c as tt,d as st,e as at}from"./ui.Ct99_20N.js";import{c as rt,z as h,t as nt}from"./form-vendor.UGN1QS47.js";import{Q as it,p as ne,s as ie,t as g,b as ue,a as W,i as se,u as ot}from"./vendor.BGj4DGRB.js";async function ke(t){if(!t.ok){const n=await t.text()||t.statusText;throw new Error(`${t.status}: ${n}`)}}async function ae(t,n,i){const r=localStorage.getItem("auth_token"),x={};i&&(x["Content-Type"]="application/json"),r&&(x.Authorization=`Bearer ${r}`);const w=await fetch(n,{method:t,headers:x,body:i?JSON.stringify(i):void 0,credentials:"include"});return await ke(w),w}const xe=({on401:t})=>async({queryKey:n})=>{const i=localStorage.getItem("auth_token"),r={};i&&(r.Authorization=`Bearer ${i}`);const x=await fetch(n[0],{headers:r,credentials:"include"});return t==="returnNull"&&x.status===401?null:(await ke(x),await x.json())},X=new it({defaultOptions:{queries:{queryFn:xe({on401:"throw"}),staleTime:5*60*1e3,gcTime:10*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!1,retry:(t,n)=>n?.message?.includes("4")&&!n?.message?.includes("408")&&!n?.message?.includes("429")?!1:t<2,retryDelay:t=>Math.min(1e3*2**t,3e4)},mutations:{retry:(t,n)=>n?.message?.includes("4")?!1:t<1,onMutate:()=>{}}}}),St={matches:()=>X.invalidateQueries({queryKey:["/api/matches"]}),messages:t=>t?X.invalidateQueries({queryKey:["/api/messages",t]}):X.invalidateQueries({queryKey:["/api/messages"]}),potentialMatches:()=>X.invalidateQueries({queryKey:["/api/potential-matches"]}),user:()=>X.invalidateQueries({queryKey:["/api/me"]})},lt=1,ct=1e6;let ce=0;function dt(){return ce=(ce+1)%Number.MAX_SAFE_INTEGER,ce.toString()}const de=new Map,we=t=>{if(de.has(t))return;const n=setTimeout(()=>{de.delete(t),J({type:"REMOVE_TOAST",toastId:t})},ct);de.set(t,n)},mt=(t,n)=>{switch(n.type){case"ADD_TOAST":return{...t,toasts:[n.toast,...t.toasts].slice(0,lt)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(i=>i.id===n.toast.id?{...i,...n.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=n;return i?we(i):t.toasts.forEach(r=>{we(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===i||i===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return n.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==n.toastId)}}},ee=[];let te={toasts:[]};function J(t){te=mt(te,t),ee.forEach(n=>{n(te)})}function ht({...t}){const n=dt(),i=x=>J({type:"UPDATE_TOAST",toast:{...x,id:n}}),r=()=>J({type:"DISMISS_TOAST",toastId:n});return J({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:x=>{x||r()}}}),{id:n,dismiss:r,update:i}}function fe(){const[t,n]=l.useState(te);return l.useEffect(()=>(ee.push(n),()=>{const i=ee.indexOf(n);i>-1&&ee.splice(i,1)}),[t]),{...t,toast:ht,dismiss:i=>J({type:"DISMISS_TOAST",toastId:i})}}const re=ne("users",{id:ie("id").primaryKey(),nickname:g("nickname").notNull().unique(),age:g("age").notNull(),instagram:g("instagram"),password:g("password").notNull(),bio:g("bio"),interests:g("interests").array(),hobbies:g("hobbies"),profileImage:g("profile_image"),province:g("province"),school:g("school"),profileCompleted:ue("profile_completed").default(!1),isActive:ue("is_active").default(!0),createdAt:W("created_at").defaultNow(),updatedAt:W("updated_at").defaultNow()});ne("schools",{id:ie("id").primaryKey(),name:g("name").notNull(),province:g("province").notNull(),address:g("address"),googlePlaceId:g("google_place_id"),createdAt:W("created_at").defaultNow()});const ut=ne("matches",{id:ie("id").primaryKey(),userId1:se("user_id_1").notNull().references(()=>re.id),userId2:se("user_id_2").notNull().references(()=>re.id),status:g("status").notNull().default("pending"),createdAt:W("created_at").defaultNow()});ne("messages",{id:ie("id").primaryKey(),matchId:se("match_id").notNull().references(()=>ut.id),senderId:se("sender_id").notNull().references(()=>re.id),content:g("content").notNull(),messageType:g("message_type").notNull().default("text"),imageUrl:g("image_url"),isRead:ue("is_read").default(!1),createdAt:W("created_at").defaultNow()});const xt=rt(re).omit({id:!0}),Tt=h.object({nickname:h.string().min(1,"กรุณาใส่ชื่อเล่น"),password:h.string().min(1,"กรุณาใส่รหัสผ่าน")}),Ct=xt.extend({confirmPassword:h.string().min(6,"รหัสผ่านต้องมีอย่างน้อย 6 ตัวอักษร")}).refine(t=>t.password===t.confirmPassword,{message:"รหัสผ่านไม่ตรงกัน",path:["confirmPassword"]}),It=h.object({profileImage:h.string().optional(),nickname:h.string().min(1,"กรุณาใส่ชื่อเล่น"),age:h.string().min(1,"กรุณาเลือกช่วงอายุ"),instagram:h.string().optional(),bio:h.string().optional().refine(t=>!t||t.length>=10,{message:"แนะนำตัวอย่างน้อย 10 ตัวอักษร"}).refine(t=>!t||t.length<=200,{message:"แนะนำตัวไม่เกิน 200 ตัวอักษร"}),interests:h.array(h.string()).optional(),hobbies:h.string().optional().refine(t=>!t||t.length>=5,{message:"งานอดิเรกอย่างน้อย 5 ตัวอักษร"}),province:h.string().optional(),school:h.string().optional(),currentPassword:h.string().min(1,"กรุณาใส่รหัสผ่านปัจจุบัน"),newPassword:h.string().optional(),confirmNewPassword:h.string().optional()}).refine(t=>t.newPassword&&t.newPassword.length>0?t.newPassword.length<6?!1:t.newPassword===t.confirmNewPassword:!0,{message:"รหัสผ่านใหม่ไม่ตรงกันหรือสั้นเกินไป (ต้องมีอย่างน้อย 6 ตัวอักษร)",path:["confirmNewPassword"]}),ft=h.object({bio:h.string().min(10,"แนะนำตัวอย่างน้อย 10 ตัวอักษร").max(200,"แนะนำตัวไม่เกิน 200 ตัวอักษร"),interests:h.array(h.string()).min(1,"เลือกความชอบอย่างน้อย 1 อย่าง"),hobbies:h.string().min(5,"งานอดิเรกอย่างน้อย 5 ตัวอักษร"),profileImage:h.string().min(1,"กรุณาเพิ่มรูปภาพ"),province:h.string().min(1,"กรุณาเลือกจังหวัด"),school:h.string().min(1,"กรุณาใส่ชื่อโรงเรียน")});h.object({query:h.string().min(1,"กรุณาใส่ชื่อโรงเรียน"),province:h.string().optional()});const me="auth_token",z={getToken:()=>localStorage.getItem(me),setToken:t=>{localStorage.setItem(me,t)},removeToken:()=>{localStorage.removeItem(me)},isAuthenticated:()=>!!z.getToken(),login:async t=>{const i=await(await ae("POST","/api/login",t)).json();return z.setToken(i.token),i},register:async t=>{const i=await(await ae("POST","/api/register",t)).json();return z.setToken(i.token),i},logout:()=>{z.removeToken(),window.location.href="/login"},getCurrentUser:async()=>{const t=z.getToken();if(!t)throw new Error("No token found");const n=await fetch("/api/me",{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error("Failed to fetch user");return n.json()}};function Se(){const{data:t,isLoading:n,error:i}=je({queryKey:["/api/me"],queryFn:xe({on401:"returnNull"}),enabled:z.isAuthenticated(),retry:!1});return{user:t,isLoading:n,isAuthenticated:z.isAuthenticated(),error:i}}const gt=["ชานมไข่มุก","กาแฟ","ดนตรี","ภาพยนตร์","อาหาร","ท่องเที่ยว","ออกกำลังกาย","อ่านหนังสือ","เกม","ถ่ายรูป","ช้อปปิ้ง","ทำอาหาร","ศิลปะ","กีฬา","แฟชั่น","เทคโนโลยี"],bt=["กรุงเทพมหานคร","กระบี่","กาญจนบุรี","กาฬสินธุ์","กำแพงเพชร","ขอนแก่น","จันทบุรี","ฉะเชิงเทรา","ชลบุรี","ชัยนาท","ชัยภูมิ","ชุมพร","เชียงราย","เชียงใหม่","ตรัง","ตราด","ตาก","นครนายก","นครปฐม","นครพนม","นครราชสีมา","นครศรีธรรมราช","นครสวรรค์","นนทบุรี","นราธิวาส","น่าน","บึงกาฬ","บุรีรัมย์","ปทุมธานี","ประจวบคีรีขันธ์","ปราจีนบุรี","ปัตตานี","พระนครศรีอยุธยา","พังงา","พัทลุง","พิจิตร","พิษณุโลก","เพชรบุรี","เพชรบูรณ์","แพร่","ภูเก็ต","มหาสารคาม","มุกดาหาร","แม่ฮ่องสอน","ยโสธร","ยะลา","ร้อยเอ็ด","ระนอง","ระยอง","ราชบุรี","ลพบุรี","ลำปาง","ลำพูน","เลย","ศรีสะเกษ","สกลนคร","สงขลา","สตูล","สมุทรปราการ","สมุทรสาคร","สมุทรสงคราม","สระแก้ว","สระบุรี","สิงห์บุรี","สุโขทัย","สุพรรณบุรี","สุราษฎร์ธานี","สุรินทร์","หนองคาย","หนองบัวลำภู","อ่างทอง","อำนาจเจริญ","อุดรธานี","อุตรดิตถ์","อุทัยธานี","อุบลราชธานี"];function pt({user:t,onComplete:n}){const{toast:i}=fe(),[r,x]=l.useState([]),[w,O]=l.useState(""),[E,D]=l.useState(""),T=(()=>{const s=localStorage.getItem(`profile_draft_${t?.id}`);if(s)try{return JSON.parse(s)}catch{}return{profileImage:"",bio:"",interests:[],hobbies:"",province:"",school:""}})(),d=ze({resolver:nt(ft),defaultValues:T});l.useEffect(()=>{x(T.interests||[]),O(T.profileImage||""),D(T.province||"")},[]);const C=s=>{const k={...d.getValues(),...s};localStorage.setItem(`profile_draft_${t?.id}`,JSON.stringify(k))},b=s=>{const j=s.target.files?.[0];if(j){const k=new FileReader;k.onload=L=>{const A=L.target?.result;O(A),d.setValue("profileImage",A),C({profileImage:A})},k.readAsDataURL(j)}},P=s=>{const j=r.includes(s)?r.filter(k=>k!==s):[...r,s];x(j),d.setValue("interests",j),C({interests:j})},R=ve({mutationFn:async s=>(await ae("POST","/api/profile-setup",s)).json(),onSuccess:()=>{i({title:"สร้างโปรไฟล์สำเร็จ",description:"เริ่มค้นหาเพื่อนใหม่กันเถอะ!"}),localStorage.removeItem(`profile_draft_${t?.id}`),n()},onError:s=>{i({title:"การสร้างโปรไฟล์ไม่สำเร็จ",description:s.message||"เกิดข้อผิดพลาด",variant:"destructive"})}}),U=s=>{D(s),d.setValue("province",s),C({province:s})},K=s=>{R.mutate(s)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 p-4",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 animate-in slide-in-from-top duration-500",children:[e.jsx("div",{className:"text-6xl mb-4",children:"👋"}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["สวัสดี ",t?.nickname,"!"]}),e.jsx("p",{className:"text-gray-600",children:"มาสร้างโปรไฟล์เพื่อค้นหาเพื่อนใหม่กัน"})]}),e.jsxs("form",{onSubmit:d.handleSubmit(K),className:"space-y-6",children:[e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-700",children:[e.jsxs(H,{className:"text-base font-medium text-gray-700 mb-3 block flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"รูปบัตรโปรไฟล์"]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("label",{className:"relative cursor-pointer group",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"}),w?e.jsxs("div",{className:"relative w-48 h-64 rounded-2xl overflow-hidden border-4 border-amber-200 group-hover:border-amber-300 transition-colors shadow-lg",children:[e.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}):e.jsxs("div",{className:"w-48 h-64 rounded-2xl bg-gradient-to-br from-amber-100 to-orange-200 border-4 border-amber-200 group-hover:border-amber-300 transition-colors flex flex-col items-center justify-center shadow-lg",children:[e.jsx(be,{className:"w-12 h-12 text-amber-600 mb-3"}),e.jsx("span",{className:"text-amber-700 text-sm font-medium",children:"เพิ่มรูปบัตร"}),e.jsx("span",{className:"text-amber-600 text-xs mt-1",children:"สำหรับแสดงให้เพื่อนเห็น"})]})]})}),d.formState.errors.profileImage&&e.jsx("p",{className:"mt-2 text-sm text-red-600 text-center",children:d.formState.errors.profileImage.message})]}),e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-700 delay-100",children:[e.jsx(H,{className:"text-base font-medium text-gray-700 mb-3 block",children:"แนะนำตัว"}),e.jsx(Ge,{...d.register("bio"),placeholder:"เล่าเกี่ยวกับตัวคุณสักหน่อย...",className:"min-h-20 resize-none border-2 border-gray-200 focus:border-amber-300 transition-colors",onChange:s=>{d.setValue("bio",s.target.value),C({bio:s.target.value})}}),d.formState.errors.bio&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.formState.errors.bio.message})]}),e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-700 delay-200",children:[e.jsx(H,{className:"text-base font-medium text-gray-700 mb-3 block",children:"ความชอบ"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:gt.map(s=>e.jsx("button",{type:"button",onClick:()=>P(s),className:`p-3 rounded-xl text-sm font-medium transition-all duration-300 ${r.includes(s)?"bg-amber-300 text-amber-900 transform scale-105":"bg-white text-gray-700 hover:bg-amber-50 hover:scale-102"}`,children:s},s))}),d.formState.errors.interests&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.formState.errors.interests.message})]}),e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-700 delay-300",children:[e.jsx(H,{className:"text-base font-medium text-gray-700 mb-3 block",children:"งานอดิเรก"}),e.jsx(he,{...d.register("hobbies"),placeholder:"เล่นกีต้าร์ ฟังเพลง วาดรูป...",className:"border-2 border-gray-200 focus:border-amber-300 transition-colors",onChange:s=>{d.setValue("hobbies",s.target.value),C({hobbies:s.target.value})}}),d.formState.errors.hobbies&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.formState.errors.hobbies.message})]}),e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-700 delay-400",children:[e.jsxs(H,{className:"text-base font-medium text-gray-700 mb-3 block flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"จังหวัด"]}),e.jsxs(Ze,{onValueChange:U,value:E,children:[e.jsx(et,{className:"border-2 border-gray-200 focus:border-amber-300 transition-colors",children:e.jsx(tt,{placeholder:"เลือกจังหวัด"})}),e.jsx(st,{className:"max-h-60",children:bt.map(s=>e.jsx(at,{value:s,children:s},s))})]}),d.formState.errors.province&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.formState.errors.province.message})]}),e.jsxs("div",{className:"animate-in slide-in-from-bottom duration-700 delay-500",children:[e.jsxs(H,{className:"text-base font-medium text-gray-700 mb-3 block flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"โรงเรียน"]}),e.jsx(he,{...d.register("school"),placeholder:"ใส่ชื่อโรงเรียนของคุณ...",className:"border-2 border-gray-200 focus:border-amber-300 transition-colors",onChange:s=>{d.setValue("school",s.target.value),C({school:s.target.value})}}),d.formState.errors.school&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:d.formState.errors.school.message})]}),e.jsx("div",{className:"animate-in slide-in-from-bottom duration-700 delay-600",children:e.jsx(v,{type:"submit",disabled:R.isPending,className:"w-full bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600 text-white py-4 rounded-xl text-lg font-semibold transform hover:scale-105 transition-all duration-300 shadow-lg",children:R.isPending?"กำลังสร้างโปรไฟล์...":"✨ เริ่มค้นหาเพื่อน"})})]})]})})}function Mt(){const{user:t}=Se(),{toast:n}=fe(),i=Ne(),[r,x]=l.useState(0),[w,O]=l.useState(!1),[E,D]=l.useState({x:0,y:0}),[$,T]=l.useState(0),[d,C]=l.useState(!0),b=l.useRef(null),{data:P=[],isLoading:R,refetch:U}=je({queryKey:["/api/potential-matches"],queryFn:xe({on401:"throw"}),enabled:!!t}),K=ve({mutationFn:async o=>(await ae("POST","/api/match",{targetUserId:o})).json(),onSuccess:o=>{n({title:"แมทช์สำเร็จ! 🎉",description:"คุณสามารถเริ่มแชทได้แล้ว"}),i.invalidateQueries({queryKey:["/api/matches"]}),window.dispatchEvent(new CustomEvent("matchCreated"))},onError:o=>{n({title:"ไม่สามารถแมทช์ได้",description:o.message||"เกิดข้อผิดพลาด",variant:"destructive"})}});if(l.useEffect(()=>{const o=setTimeout(()=>{C(!1)},3e3);return()=>clearTimeout(o)},[]),!t?.profileCompleted)return e.jsx(pt,{user:t,onComplete:()=>U()});if(R)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"กำลังค้นหาเพื่อนใหม่..."})]})});if(P.length===0||r>=P.length)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center bg-white rounded-3xl p-8 shadow-lg max-w-sm",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ไม่มีเพื่อนใหม่"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ลองกลับมาดูใหม่ภายหลัง หรือปรับการตั้งค่าของคุณ"}),e.jsx(v,{onClick:()=>U(),className:"btn-primary",children:"ค้นหาอีกครั้ง"})]})});const s=P[r],j=o=>"touches"in o?{x:o.touches[0].clientX,y:o.touches[0].clientY}:{x:o.clientX,y:o.clientY},k=()=>{b.current&&(b.current.style.transform="translateX(0) translateY(0) rotate(0deg)",b.current.style.opacity="1"),D({x:0,y:0}),T(0)},L=o=>{"button"in o&&o.preventDefault(),O(!0),j(o)},A=o=>{if(!w)return;"button"in o&&o.preventDefault();const S=b.current?.getBoundingClientRect();if(!S)return;const q=j(o),G=S.left+S.width/2,oe=S.top+S.height/2,p=q.x-G,Q=q.y-oe;D({x:p,y:Q}),T(p*.1),b.current&&(b.current.style.transform=`translateX(${p}px) translateY(${Q}px) rotate(${p*.1}deg)`)},B=()=>{if(!w)return;O(!1);const o=100;E.x>o?F():E.y>o?V():k()},F=()=>{K.mutate(s.id),b.current&&(b.current.style.transform="translateX(100vw) rotate(30deg)",b.current.style.opacity="0"),setTimeout(()=>{x(o=>o+1),k()},300)},V=()=>{b.current&&(b.current.style.transform="translateY(100vh)",b.current.style.opacity="0"),setTimeout(()=>{x(o=>o+1),k()},300)};return e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 overflow-hidden",children:[e.jsxs("div",{className:"relative z-20 flex justify-between items-center p-4 bg-white/80 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"ค้นหาเพื่อน"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>U(),className:"text-gray-600 hover:text-amber-600",children:e.jsx(Oe,{className:"w-5 h-5"})})})]}),d&&e.jsxs("div",{className:"absolute inset-0 z-30 pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/2 left-8 transform -translate-y-1/2 bg-black/70 text-white px-4 py-2 rounded-full text-sm animate-bounce",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"ปัดขวาเพื่อแชท"})]})}),e.jsx("div",{className:"absolute bottom-32 left-1/2 transform -translate-x-1/2 bg-black/70 text-white px-4 py-2 rounded-full text-sm animate-bounce delay-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:"เลื่อนลงเพื่อหาคนต่อไป"})]})})]}),e.jsx("div",{className:"absolute inset-4 flex items-center justify-center",children:e.jsxs("div",{ref:b,className:"relative w-full max-w-md h-full max-h-[700px] bg-white rounded-3xl shadow-2xl overflow-hidden cursor-grab active:cursor-grabbing transform-gpu transition-transform duration-300 ease-out",onMouseDown:L,onMouseMove:A,onMouseUp:B,onMouseLeave:B,onTouchStart:L,onTouchMove:A,onTouchEnd:B,children:[e.jsx("div",{className:`absolute top-8 left-8 z-10 px-4 py-2 rounded-full font-bold text-xl transform transition-all duration-300 ${E.x>50?"scale-110 opacity-100":"scale-75 opacity-0"} bg-green-500 text-white shadow-lg`,children:"LIKE ❤️"}),e.jsx("div",{className:`absolute top-8 right-8 z-10 px-4 py-2 rounded-full font-bold text-xl transform transition-all duration-300 ${E.y>50?"scale-110 opacity-100":"scale-75 opacity-0"} bg-red-500 text-white shadow-lg`,children:"PASS ✋"}),e.jsxs("div",{className:"relative h-3/5 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 rounded-3xl overflow-hidden",children:[s.profileImage?e.jsx("img",{src:s.profileImage,alt:s.nickname,className:"w-full h-full object-cover",draggable:!1}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-amber-200 to-orange-300 flex items-center justify-center",children:e.jsx("div",{className:"text-6xl text-white",children:"👤"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[s.nickname,e.jsx("span",{className:"text-lg bg-white/20 px-3 py-1 rounded-full backdrop-blur-sm",children:s.age})]}),s.bio&&e.jsx("p",{className:"text-base text-white/90 leading-relaxed mb-4",children:s.bio})]}),s.interests&&s.interests.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.interests.map((o,S)=>e.jsx(We,{variant:"secondary",className:"bg-white/20 text-white border-white/30 hover:bg-white/30 transition-colors",children:o},S))})}),e.jsxs("div",{className:"text-sm text-white/80 space-y-1",children:[s.hobbies&&e.jsxs("p",{children:["🎯 ",s.hobbies]}),s.province&&e.jsxs("p",{children:["📍 ",s.province]}),s.school&&e.jsxs("p",{children:["🏫 ",s.school]}),s.instagram&&e.jsxs("p",{children:["📸 ",s.instagram]})]})]})]}),e.jsx("div",{className:"h-2/5 p-6 bg-white overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[s.bio&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"เกี่ยวกับฉัน"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:s.bio})]}),s.interests&&s.interests.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"ความชอบ"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.interests.map((o,S)=>e.jsx("span",{className:"px-3 py-1 bg-amber-100 text-amber-800 text-xs rounded-full",children:o},S))})]}),s.hobbies&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"งานอดิเรก"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.hobbies})]})]})})]})}),e.jsxs("div",{className:"absolute bottom-8 left-0 right-0 flex justify-center space-x-12 px-4",children:[e.jsx(v,{onClick:V,className:"w-16 h-16 rounded-full bg-white border-2 border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 hover:scale-110 transform transition-all duration-300 shadow-lg",children:e.jsx($e,{className:"w-8 h-8"})}),e.jsx(v,{onClick:F,className:"w-16 h-16 rounded-full bg-gradient-to-r from-pink-400 to-red-400 text-white hover:from-pink-500 hover:to-red-500 hover:scale-110 transform transition-all duration-300 shadow-lg",children:e.jsx(Re,{className:"w-8 h-8"})})]}),e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-sm text-gray-600",children:[r+1," / ",P.length]})]})}function _t(){const{user:t}=Se();Ne();const[n,i]=l.useState([]),[r,x]=l.useState(null),[w,O]=l.useState(""),[E,D]=l.useState(!0),[$,T]=l.useState(!1),[d,C]=l.useState(null),[b,P]=l.useState(!1),[R,U]=l.useState(Date.now()),[K,s]=l.useState(!1),[j,k]=l.useState(!1);l.useState(!1);const[L,A]=l.useState("list"),B=l.useRef(),F=l.useRef(null),V=l.useRef(null),{toast:o}=fe(),[S,q]=l.useState(new Map),G=l.useCallback(a=>{const c=new Date(a),u=new Date,m=Math.floor((u.getTime()-c.getTime())/(1e3*60));return m<1?"เมื่อสักครู่":m<60?`${m} นาทีที่แล้ว`:m<1440?`${Math.floor(m/60)} ชั่วโมงที่แล้ว`:m<10080?`${Math.floor(m/1440)} วันที่แล้ว`:c.toLocaleDateString("th-TH",{day:"numeric",month:"short",year:c.getFullYear()!==u.getFullYear()?"numeric":void 0})},[]),oe=l.useCallback(a=>{if(a){const c=a.startsWith("@")?a.slice(1):a;window.open(`https://instagram.com/${c}`,"_blank")}},[]);l.useCallback(()=>{F.current?.scrollIntoView({behavior:"smooth"})},[]);const p=l.useCallback(()=>localStorage.getItem("token")||localStorage.getItem("authToken")||localStorage.getItem("auth_token"),[]),Q=l.useCallback(async a=>{try{const c=p();if(!c)return;await fetch(`/api/messages/${a}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`}}),i(u=>u.map(m=>m.id===a?{...m,unreadCount:0}:m))}catch{}},[p]),Te=l.useCallback(async a=>{if(K||Date.now()-R<2e3)return;const c=S.get(a.id);if(c&&c.length>0){const u={match:a,messages:c,lastMessage:c[c.length-1]};x(u);return}s(!0);try{const u=p();if(!u)return;const m=await fetch(`/api/messages/${a.id}`,{headers:{Authorization:`Bearer ${u}`}});if(m.ok){const y=await m.json();q(N=>new Map(N).set(a.id,y));const M={match:a,messages:y,lastMessage:y[y.length-1]};x(M),U(Date.now()),await Q(a.id)}}catch{}finally{s(!1)}},[K,R,S,p,Q]),Ce=l.useCallback(async()=>{try{!E&&D(!0);const a=p();if(!a)return;const c=await fetch("/api/matches?include_unread=true",{headers:{Authorization:`Bearer ${a}`}});if(c.status===403||c.status===401){localStorage.removeItem("token");return}if(c.ok){const u=await c.json();i(u)}}catch{}finally{D(!1)}},[p,E]),Ie=l.useCallback(a=>{O(a.target.value),!j&&r&&(k(!0),d?.send(JSON.stringify({type:"typing_start",matchId:r.match.id}))),clearTimeout(B.current),B.current=setTimeout(()=>{k(!1),r&&d?.send(JSON.stringify({type:"typing_stop",matchId:r.match.id}))},1e3)},[j,r,d]),le=l.useCallback(async(a="text",c)=>{if(!(!w.trim()&&a==="text"||!r||$)){T(!0);try{const u=p();if(!u){o({title:"เกิดข้อผิดพลาด",description:"กรุณาเข้าสู่ระบบใหม่",variant:"destructive"});return}const m=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({matchId:r.match.id,content:a==="text"?w:"ส่งรูปภาพ",messageType:a,imageUrl:c})});if(m.ok){const y=await m.json();x(M=>{if(!M)return null;const N=[...M.messages,y];return{...M,messages:N,lastMessage:y}}),q(M=>{const N=new Map(M),Y=N.get(r.match.id)||[];return N.set(r.match.id,[...Y,y]),N}),O("")}else throw new Error(`Failed to send message: ${m.status}`)}catch{o({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถส่งข้อความได้",variant:"destructive"})}finally{T(!1)}}},[w,r,$,p,o]),Me=async a=>{const c=a.target.files?.[0];if(!(!c||!r)){if(!c.type.startsWith("image/")){o({title:"ไฟล์ไม่ถูกต้อง",description:"กรุณาเลือกไฟล์รูปภาพ",variant:"destructive"});return}if(c.size>5*1024*1024){o({title:"ไฟล์ใหญ่เกินไป",description:"กรุณาเลือกไฟล์ที่มีขนาดไม่เกิน 5MB",variant:"destructive"});return}try{T(!0);const u=p();if(!u)return;const m=new FormData;m.append("image",c);const y=await fetch("/api/upload",{method:"POST",headers:{Authorization:`Bearer ${u}`},body:m});if(y.ok){const{imageUrl:M}=await y.json();await le("image",M)}else throw new Error("Upload failed")}catch{o({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถอัปโหลดรูปภาพได้",variant:"destructive"})}finally{T(!1),V.current&&(V.current.value="")}}},_e=async()=>{if(r){try{const a=p();if(!a)return;(await fetch(`/api/matches/${r.match.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok&&(i(u=>u.filter(m=>m.id!==r.match.id)),x(null),q(u=>{const m=new Map(u);return m.delete(r.match.id),m}),o({title:"ลบแชทสำเร็จ",description:"แชทและข้อความทั้งหมดถูกลบแล้ว"}))}catch{o({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถลบแชทได้",variant:"destructive"})}P(!1)}};l.useEffect(()=>{let a,c=0;const u=5,m=()=>{if(!t)return;const y=p();if(!y)return;const M=`wss://${window.location.host}`;try{const N=new WebSocket(M);N.onopen=()=>{c=0,N.send(JSON.stringify({type:"auth",token:y}))},N.onmessage=Y=>{try{const f=JSON.parse(Y.data);switch(f.type){case"auth_success":break;case"new_message":if(f.message&&(r?.match.id===f.message.matchId&&(x(I=>{if(!I)return null;if(I.messages.some(ge=>ge.id===f.message.id))return I;const Z=[...I.messages,f.message];return{...I,messages:Z,lastMessage:f.message}}),Q(f.message.matchId)),q(I=>{const _=new Map(I),Z=_.get(f.message.matchId)||[];return Z.some(Ae=>Ae.id===f.message.id)||_.set(f.message.matchId,[...Z,f.message]),_}),i(I=>I.map(_=>_.id===f.message.matchId?{..._,lastMessage:f.message,unreadCount:r?.match.id===f.message.matchId?0:(_.unreadCount||0)+1}:_)),r?.match.id!==f.message.matchId)){const I=n.find(_=>_.id===f.message.matchId);I&&o({title:`ข้อความใหม่จาก ${I.otherUser.nickname}`,description:f.message.content.length>50?f.message.content.substring(0,50)+"...":f.message.content})}break;case"typing_start":break;case"typing_stop":break;default:}}catch{}},N.onclose=Y=>{if(C(null),t&&!Y.wasClean&&c<u){const f=Math.min(1e3*Math.pow(2,c),3e4);c++,a=setTimeout(()=>{m()},f)}else c>=u&&o({title:"การเชื่อมต่อขาดหาย",description:"ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้ กรุณารีเฟรชหน้า",variant:"destructive"})},N.onerror=Y=>{},C(N)}catch{}};return m(),Ce(),()=>{a&&clearTimeout(a),d&&(d.close(1e3,"Component unmounting"),C(null))}},[t,p,o]),l.useEffect(()=>{r&&r.messages.length>0&&setTimeout(()=>{F.current?.scrollIntoView({behavior:"smooth"})},100)},[r?.messages]);const Ee=async a=>{await Te(a),A("chat")},Pe=()=>{A("list"),x(null)};return e.jsx("div",{className:"flex-1 overflow-hidden bg-gradient-to-br from-amber-50 via-white to-amber-100 min-h-screen",children:e.jsxs("div",{className:"flex h-full flex-col overflow-auto",children:[L==="list"&&e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-lg mx-auto mt-8 bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-amber-100 p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-amber-600 mb-4 text-center drop-shadow",children:"แชทของคุณ"}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-amber-200 scrollbar-track-transparent",children:E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"animate-pulse flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-200 shadow-lg"}),e.jsx("div",{className:"text-amber-600 font-semibold",children:"กำลังโหลด..."})]})}):n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 p-6",children:[e.jsx(ye,{className:"w-14 h-14 mb-2 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"ยังไม่มีแชท"}),e.jsx("p",{className:"text-sm",children:"เริ่มต้นแชทกับเพื่อนใหม่ของคุณ"})]}):e.jsx("ul",{className:"divide-y divide-amber-100",children:n.map(a=>e.jsx("li",{className:`
                          transition-all duration-200 cursor-pointer
                          hover:bg-amber-100/60 active:bg-amber-200/80
                          rounded-2xl my-2 shadow-sm
                          ${r?.match.id===a.id?"bg-amber-50 border-l-4 border-amber-400":""}
                        `,onClick:()=>Ee(a),children:e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.otherUser.profileImage||"",alt:"",className:"w-14 h-14 rounded-full object-cover border-2 border-amber-200 shadow-md"}),a.otherUser.isActive&&e.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white shadow"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:a.otherUser.nickname}),e.jsx("span",{className:"text-xs text-gray-400",children:a.lastMessage?G(a.lastMessage.createdAt):null})]}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.lastMessage?.content||"ยังไม่มีข้อความ"})]}),a.unreadCount?e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-amber-500 text-white rounded-full text-xs font-bold shadow",children:a.unreadCount}):null]})},a.id))})})]})}),L==="chat"&&r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"w-full max-w-2xl mx-auto bg-white/90 rounded-3xl shadow-2xl border border-amber-100 flex flex-col h-[80vh] relative",children:[e.jsxs("div",{className:"p-4 border-b border-amber-100 bg-white/80 rounded-t-3xl flex items-center justify-between shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{variant:"ghost",size:"icon",onClick:Pe,className:"mr-2",children:e.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-amber-500",children:e.jsx("path",{d:"M15 18l-6-6 6-6"})})}),e.jsx("img",{src:r.match.otherUser.profileImage||"",alt:"",className:"w-10 h-10 rounded-full object-cover border-2 border-amber-200 shadow"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:r.match.otherUser.nickname}),j&&e.jsx("p",{className:"text-xs text-amber-600 animate-pulse",children:"กำลังพิมพ์..."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.match.otherUser.instagram&&e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>oe(r.match.otherUser.instagram),children:e.jsx(Ve,{className:"w-5 h-5 text-amber-500"})}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>P(!0),children:e.jsx(pe,{className:"w-5 h-5 text-red-500"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-amber-50/60 to-white/80 p-6 space-y-4 rounded-b-3xl",children:[r.messages.map(a=>{const c=a.senderId===t?.id;return e.jsx("div",{className:`flex ${c?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[70%] ${c?"order-2":"order-1"}`,children:a.messageType==="image"?e.jsx("div",{className:"rounded-2xl overflow-hidden shadow-lg border border-amber-100",children:e.jsx("img",{src:a.imageUrl,alt:"Shared",className:"max-w-full h-auto"})}):e.jsxs("div",{className:`
                            px-5 py-3 rounded-2xl shadow-md border
                            ${c?"bg-amber-500/90 text-white border-amber-200 rounded-br-none":"bg-white/90 text-gray-900 border-amber-100 rounded-bl-none"}
                          `,children:[e.jsx("p",{className:"text-base",children:a.content}),e.jsx("span",{className:"text-[11px] opacity-70 mt-1 block text-right",children:G(a.createdAt)})]})})},a.id)}),e.jsx("div",{ref:F})]}),e.jsx("div",{className:"p-4 bg-white/80 border-t border-amber-100 rounded-b-3xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:V,className:"hidden",accept:"image/*",onChange:Me}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>V.current?.click(),disabled:$,children:e.jsx(qe,{className:"w-6 h-6 text-amber-600"})}),e.jsx("div",{className:"flex-1",children:e.jsx(he,{value:w,onChange:Ie,onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),le())},placeholder:"พิมพ์ข้อความ...",disabled:$,className:"border-amber-200 focus:ring-amber-500 bg-white/80 rounded-xl shadow"})}),e.jsx(v,{onClick:()=>le(),disabled:$||!w.trim(),className:`bg-amber-500 hover:bg-amber-600 text-white shadow-lg rounded-xl ${$?"opacity-50 cursor-not-allowed":""}`,children:e.jsx(Ke,{className:"w-5 h-5"})})]})})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border border-amber-100 flex flex-col items-center",children:[e.jsx(pe,{className:"w-10 h-10 text-red-500 mb-2"}),e.jsx("h4",{className:"text-lg font-bold mb-2",children:"ยืนยันการลบแชท"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"คุณต้องการลบแชทนี้จริงหรือไม่?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(v,{onClick:_e,className:"bg-red-500 hover:bg-red-600 text-white rounded-lg shadow",children:"ลบ"}),e.jsx(v,{onClick:()=>P(!1),variant:"outline",className:"rounded-lg",children:"ยกเลิก"})]})]})})]})})}function Et(){const t=()=>{},n=()=>{},i=()=>{};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"text-center py-8 animate-in fade-in duration-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-accent-brown mb-2 animate-bounce-gentle",children:"🎥 วิดีโอคอล"}),e.jsx("p",{className:"text-tea-milk-dark",children:"พูดคุยแบบเห็นหน้ากัน"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-tea-lg p-6 border border-tea-milk-base text-center card-hover animate-in slide-in-from-left duration-500",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-accent-pink to-tea-milk-medium rounded-full flex items-center justify-center mx-auto mb-4 animate-float",children:e.jsx(Be,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-accent-brown mb-2",children:"วิดีโอคอลกับเพื่อน"}),e.jsx("p",{className:"text-sm text-tea-milk-dark mb-4",children:"เริ่มการโทรกับเพื่อนที่แมทช์แล้ว"}),e.jsx(v,{onClick:t,className:"btn-primary text-white py-3 px-6 rounded-xl font-medium hover:scale-105 transform transition-all duration-300",children:"เริ่มโทร"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-tea-lg p-6 border border-tea-milk-base text-center card-hover animate-in slide-in-from-right duration-500 delay-100",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-tea-milk-medium to-accent-brown rounded-full flex items-center justify-center mx-auto mb-4 animate-float",style:{animationDelay:"1s"},children:e.jsx(Fe,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-accent-brown mb-2",children:"แชทวิดีโอแบบสุ่ม"}),e.jsx("p",{className:"text-sm text-tea-milk-dark mb-4",children:"พบกับคนใหม่แบบสุ่ม"}),e.jsx(v,{onClick:n,className:"bg-gradient-to-r from-tea-milk-medium to-tea-milk-dark text-white py-3 px-6 rounded-xl font-medium hover:shadow-tea-lg hover:scale-105 transform transition-all duration-300",children:"สุ่มคุย"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-tea p-4 border border-tea-milk-base card-hover animate-in slide-in-from-bottom duration-500 delay-200",children:[e.jsx("h3",{className:"font-semibold text-accent-brown mb-3",children:"การโทรล่าสุด"}),e.jsxs("div",{className:"flex items-center space-x-3 py-2 hover:bg-tea-milk-light rounded-xl transition-all duration-200 px-2 -mx-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-accent-pink to-tea-milk-medium rounded-full flex items-center justify-center animate-pulse-soft",children:e.jsx("span",{className:"text-white text-sm font-semibold",children:"น"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-accent-brown",children:"นัท"}),e.jsx("p",{className:"text-xs text-tea-milk-dark",children:"วันนี้ 14:30 - 15 นาที"})]}),e.jsx("button",{onClick:i,className:"text-accent-brown hover:text-accent-brown/80 p-2 rounded-full hover:bg-tea-milk-cream transition-all duration-200 hover:scale-110 transform",children:e.jsx(Qe,{className:"w-5 h-5"})})]})]})]})}function wt({user:t}){const[,n]=ot(),i=()=>{z.logout()},r=()=>{},x=()=>{n("/settings")},w=()=>{n("/help")};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"text-center py-8 animate-in fade-in duration-500",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-accent-pink to-tea-milk-medium rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce-gentle",children:e.jsx("span",{className:"text-white text-3xl font-bold",children:t.nickname[0]?.toUpperCase()})}),e.jsx("h2",{className:"text-2xl font-bold text-accent-brown mb-1 animate-in slide-in-from-bottom duration-500 delay-100",children:t.nickname}),e.jsx("p",{className:"text-tea-milk-dark animate-in slide-in-from-bottom duration-500 delay-200",children:t.age}),t.instagram&&e.jsx("p",{className:"text-sm text-tea-milk-dark animate-in slide-in-from-bottom duration-500 delay-300",children:t.instagram})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-tea p-6 border border-tea-milk-base card-hover animate-in slide-in-from-left duration-500 delay-100",children:[e.jsx("h3",{className:"font-semibold text-accent-brown mb-4",children:"สถิติของฉัน"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"animate-in scale-in duration-300 delay-200",children:[e.jsx("p",{className:"text-2xl font-bold text-accent-brown animate-bounce-gentle",children:"12"}),e.jsx("p",{className:"text-xs text-tea-milk-dark",children:"แมทช์"})]}),e.jsxs("div",{className:"animate-in scale-in duration-300 delay-300",children:[e.jsx("p",{className:"text-2xl font-bold text-accent-brown animate-bounce-gentle",style:{animationDelay:"0.5s"},children:"8"}),e.jsx("p",{className:"text-xs text-tea-milk-dark",children:"แชท"})]}),e.jsxs("div",{className:"animate-in scale-in duration-300 delay-400",children:[e.jsx("p",{className:"text-2xl font-bold text-accent-brown animate-bounce-gentle",style:{animationDelay:"1s"},children:"3"}),e.jsx("p",{className:"text-xs text-tea-milk-dark",children:"วิดีโอคอล"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:r,className:"w-full bg-white rounded-2xl shadow-tea p-4 border border-tea-milk-base flex items-center justify-between card-hover hover:scale-105 transform transition-all duration-300 animate-in slide-in-from-right duration-500 delay-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ye,{className:"w-5 h-5 text-accent-brown"}),e.jsx("span",{className:"font-medium text-accent-brown",children:"แก้ไขโปรไฟล์"})]}),e.jsx("span",{className:"text-tea-milk-dark",children:"›"})]}),e.jsxs("button",{onClick:x,className:"w-full bg-white rounded-2xl shadow-tea p-4 border border-tea-milk-base flex items-center justify-between card-hover hover:scale-105 transform transition-all duration-300 animate-in slide-in-from-right duration-500 delay-300",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(He,{className:"w-5 h-5 text-accent-brown"}),e.jsx("span",{className:"font-medium text-accent-brown",children:"การตั้งค่า"})]}),e.jsx("span",{className:"text-tea-milk-dark",children:"›"})]}),e.jsxs("button",{onClick:w,className:"w-full bg-white rounded-2xl shadow-tea p-4 border border-tea-milk-base flex items-center justify-between card-hover hover:scale-105 transform transition-all duration-300 animate-in slide-in-from-right duration-500 delay-400",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Xe,{className:"w-5 h-5 text-accent-brown"}),e.jsx("span",{className:"font-medium text-accent-brown",children:"ช่วยเหลือ"})]}),e.jsx("span",{className:"text-tea-milk-dark",children:"›"})]}),e.jsxs(v,{onClick:i,className:"w-full bg-red-50 border border-red-200 text-red-600 hover:bg-red-100 rounded-2xl shadow-tea p-4 flex items-center justify-center card-hover hover:scale-105 transform transition-all duration-300 animate-in slide-in-from-bottom duration-500 delay-500",children:[e.jsx(Je,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-medium",children:"ออกจากระบบ"})]})]})]})}var jt=wt;const Pt=Object.freeze(Object.defineProperty({__proto__:null,default:jt},Symbol.toStringTag,{value:"Module"}));export{_t as C,jt as P,Mt as S,Et as V,z as a,ae as b,Pt as c,xe as g,St as i,Tt as l,X as q,Ct as r,It as s,fe as u};
