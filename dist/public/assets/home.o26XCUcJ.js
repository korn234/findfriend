import{j as e,H as b,M as f,V as h,a4 as p,r as o,u as j}from"./react-vendor.BNJGvZZE.js";import{u as m}from"./vendor.BGj4DGRB.js";import{a as d,S as u,P as v,V as w,C as N}from"./features.CjRTY6ot.js";import"./ui-vendor.BQCqNqg0.js";import"./ui.Ct99_20N.js";import"./form-vendor.UGN1QS47.js";function g({activeTab:i,onTabChange:r}){const n=[{id:"swipe",label:"ปัดหา",icon:b},{id:"chat",label:"แชท",icon:f},{id:"video",label:"วิดีโอ",icon:h},{id:"profile",label:"โปรไฟล์",icon:p}];return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-tea-milk-base z-50 animate-slide-up",children:e.jsx("div",{className:"grid grid-cols-4 py-2",children:n.map((t,s)=>{const c=t.icon,a=i===t.id;return e.jsxs("button",{onClick:()=>r(t.id),className:`tab-transition flex flex-col items-center py-2 px-1 transform hover:scale-110 active:scale-95 animate-in fade-in duration-300 ${a?"text-accent-brown":"text-tea-milk-dark hover:text-accent-brown"}`,style:{animationDelay:`${s*100}ms`},children:[e.jsxs("div",{className:`relative ${a?"animate-bounce-gentle":""}`,children:[e.jsx(c,{className:`w-6 h-6 mb-1 transition-all duration-300 ${a?"text-accent-brown":""}`}),a&&e.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-accent-brown rounded-full animate-pulse-soft"})]}),e.jsx("span",{className:`text-xs font-medium transition-all duration-300 ${a?"text-accent-brown font-semibold":""}`,children:t.label})]},t.id)})})})}function S(){const[,i]=m(),[r,n]=o.useState("swipe"),[t]=m();o.useEffect(()=>{const l=new URLSearchParams(t.split("?")[1]).get("tab");l&&["swipe","chat","video","profile"].includes(l)&&n(l)},[t]);const{data:s,isLoading:c,error:a}=j({queryKey:["/api/me"],queryFn:d.getCurrentUser,retry:!1});if(o.useEffect(()=>{if(!d.isAuthenticated()){i("/login");return}a&&d.logout()},[a,i]),c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-tea-milk-medium border-t-tea-milk-dark rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-tea-milk-dark",children:"กำลังโหลด..."})]})});if(!s)return null;const x=()=>{switch(r){case"swipe":return e.jsx(u,{});case"chat":return e.jsx(N,{});case"video":return e.jsx(w,{});case"profile":return e.jsx(v,{user:s});default:return e.jsx(u,{})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-tea-milk-light to-tea-milk-cream",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-tea-milk-base",children:e.jsx("div",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-accent-brown",children:"☕ Friend Finder"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-accent-pink to-tea-milk-medium rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-semibold",children:s.nickname[0]?.toUpperCase()})})})]})})}),e.jsx("main",{className:"pb-20 min-h-screen",children:x()}),e.jsx(g,{activeTab:r,onTabChange:n})]})}export{S as default};
